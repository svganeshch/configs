$(document).ready(function(){function e(){var a=!0;return $.ajax({async:!1,url:"validateFields.php",method:"POST",data:$("#device_changes").serialize(),success:function(b){var c=$.parseJSON(b),d=0,e=$("input[name='repo_paths[]']").map(function(){return $(this).attr("id")}).get();$("[id^=repo_paths_group]").removeClass("has-error has-feedback"),$("span[id^=field-error-icon]").remove(),$.each(c,function(b,c){null!=c&&"repo_paths"==b&&$.each(e,function(b,e){c[d]==$("#"+e).val()&&($("#repo_paths_group"+e[e.length-1]).addClass("has-error has-feedback").append("<span class=\"glyphicon glyphicon-remove form-control-feedback\" id=\"field-error-icon\"></span>"),$("#repo_paths_text_field"+e[e.length-1]).focus(),d++,a=!1)})})}}),a}function f(){$.ajax({method:"POST",url:"jenkinsBlueFunc.php",data:{getProgressStatus:"yes"},success:function(a){a=a.trim(),$(".progress-bar").css("width",a+"%").attr("aria-valuenow",a).text(a+"%")}})}function g(){null!=window.curTextSize&&(1e3<=window.curTextSize&&(window.curTextSize-=1e3,$("#fullLog").show(),i()),i())}function h(){$.ajax({method:"POST",url:"jenkinsBlueFunc.php",data:{getBuildStatus:"yes"},success:function(a){$("#buildStatus").text(a),a=a.trim(),0==a.localeCompare("building")||"true"==window.Morelog?($("#build-progress-bar").show(),f(),i()):0==a.localeCompare("idle")&&!window.idleLogSetShown&&g(),window.jenkinsLooper=setTimeout(function(){h()},5e3)}})}function i(){window.idleLogSetShown=!0,$.ajax({method:"POST",url:"jenkinsBlueFunc.php",data:{getBodyOutput:"yes",headerTextSize:window.curTextSize},success:function(a){if(null!=a){var b=JSON.parse(a),c=JSON.parse(b.headers),d=b.body;if(window.Morelog=!!(["x-more-data"]in c)&&c["x-more-data"],+window.curTextSize==+c["x-text-size"])return;window.curTextSize=+c["x-text-size"],$("#buildOutput").append("<p id=\"logs\">"+d+"</p>"),$("#buildOutput").is(":hover")||$("#buildOutput").scrollTop($("#buildOutput").prop("scrollHeight"))}}})}$("[data-toggle=\"tooltip\"]").tooltip();var k,l,m,n,o,p,q,r=0,s=0,t=0,u=0;$.ajax({url:"get_data.php",method:"GET"}).done(function(a){var b=$.parseJSON(a),c=0;null!=b&&$.each(b,function(a,b){$("#global_override").bootstrapToggle("yes"==b.global_override?"on":"off"),$("#is_official").bootstrapToggle("yes"==b.is_official?"on":"off"),$("#test_build").bootstrapToggle("yes"==b.test_build?"on":"off"),$("#force_clean").bootstrapToggle("yes"==b.force_clean?"on":"off"),$("#default_buildtype_state").bootstrapToggle("yes"==b.default_buildtype_state?"on":"off"),$("#buildtype").val(b.buildtype),$("#bootimage").bootstrapToggle("yes"==b.bootimage?"on":"off"),$("#weeklies_opt").bootstrapToggle("yes"==b.weeklies_opt?"on":"off"),k=$.parseJSON(b.repo_paths),l=$.parseJSON(b.repo_clones),m=$.parseJSON(b.repo_clones_paths),n=$.parseJSON(b.repopick_topics),o=$.parseJSON(b.repopick_changes),p=b.changelog,q=b.xda_link}),null!=k&&"null"!=k&&"NULL"!=k&&$.each(k,function(a,b){if(null!=b&&"null"!=b&&"NULL"!=b)for(c=0;c<=b.length-1;c++)0!=c&&0==$("#repo_paths_text_field"+c+"").length&&$("#add1").trigger("click"),$("#repo_paths_text_field"+r+"").val(b[c])}),null!=l&&"null"!=l&&"NULL"!=l&&$.each(l,function(a,b){if(null!=b&&"null"!=b&&"NULL"!=b)for(c=0;c<=b.length-1;c++){0==$("#repo_clones_text_field"+c+"").length&&$("#add2").trigger("click");var d=b[c];if(d.includes("-b")){var e=d.split("-b");$("#repo_clones_text_field"+s+"").val(e[0].trim()),$("#repo_clone_branch_text_field"+s+"").val(e[1].trim())}else $("#repo_clones_text_field"+s+"").val(d)}}),null!=m&&"null"!=m&&"NULL"!=m&&$.each(m,function(a,b){if(null!=b&&"null"!=b&&"NULL"!=b)for(c=0;c<=b.length-1;c++)s=c,$("#repo_clones_paths_text_field"+s+"").val(b[c])}),null!=n&&"null"!=n&&"NULL"!=n&&$.each(n,function(a,b){if(null!=b&&"null"!=b&&"NULL"!=b)for(c=0;c<=b.length-1;c++)0==$("#repopick_topics_text_field"+c+"").length&&$("#add3").trigger("click"),$("#repopick_topics_text_field"+t+"").val(b[c])}),null!=o&&"null"!=o&&"NULL"!=o&&$.each(o,function(a,b){if(null!=b&&"null"!=b&&"NULL"!=b)for(c=0;c<=b.length-1;c++)0==$("#repopick_changes_text_field"+c+"").length&&$("#add4").trigger("click"),$("#repopick_changes_text_field"+u+"").val(b[c])}),null!=q&&"null"!=q&&"NULL"!=q?$("#xda_link").val(q):$("#xda_link").val(""),null!=p&&"null"!=p&&"NULL"!=p?$("#changelog").val(p):$("#changelog").val("")}),$("body").on("click","#add1",function(){r++,$("#dynamic_field-1-").append("<li class=\"list-group-item\" style=\"border:none\" id=\"dynamic_field-repo_paths"+r+"\"><div class=\"row\"><div class=\"col-md-11 col-xs-11\" style=\"padding-left:0px\"><div class=\"form-group\" id=\"repo_paths_group"+r+"\"><input autocomplete=\"on\" type=\"text\" id=\"repo_paths_text_field"+r+"\" name=\"repo_paths[]\" class=\"form-control\" /></div></div><button type=\"button\" name=\"remove\" id=\"repo_paths"+r+"\" class=\"btn btn-danger btn_remove\" style=\"margin-top: 5px;\">X</button></div></li>"),$("#repo_paths_text_field"+r+"").focus()}),$("body").on("click","#add2",function(){s++,$("#dynamic_field-2-").append("<li class=\"list-group-item\" style=\"border:none\" id=\"dynamic_field-repo_clones"+s+"\"><div class=\"row\"><div class=\"col-md-11 col-xs-11\" style=\"padding-left:0px\"><div class=\"row\"><div class=\"col-md-8 col-xs-8\"><div class=\"form-group\" id=\"repo_clones_group"+s+"\"><input placeholder=\"repo url\" autocomplete=\"on\" type=\"text\" id=\"repo_clones_text_field"+s+"\" name=\"repo_clones[]\" class=\"form-control\" /></div></div><div class=\"col-md-4 col-xs-4\"><div class=\"form-group\" id=\"repo_clone_branch_group"+s+"\"><input placeholder=\"branch\" autocomplete=\"on\" type=\"text\" id=\"repo_clone_branch_text_field"+s+"\" name=\"repo_clone_branch[]\" class=\"form-control\" /></div></div></div><br class=\"custom_br\" id=\"custom_br\"/><div class=\"form-group\" id=\"repo_clones_paths_group"+s+"\"><input placeholder=\"path for repo\" autocomplete=\"on\" type=\"text\" id=\"repo_clones_paths_text_field"+s+"\" name=\"repo_clones_paths[]\" class=\"form-control\" /></div></div><button type=\"button\" name=\"remove\" id=\"repo_clones"+s+"\" class=\"btn btn-danger btn_remove\" style=\"margin-top: 5px;\">X</button></div></li>"),$("#repo_clones_text_field"+s+"").focus()}),$("body").on("click","#add3",function(){t++,$("#dynamic_field-3-").append("<li class=\"list-group-item\" style=\"border:none\" id=\"dynamic_field-repopick_topics"+t+"\"><div class=\"row\"><div class=\"col-md-11 col-xs-11\" style=\"padding-left:0px\"><div class=\"form-group\" id=\"repopick_topics_group"+t+"\"><input autocomplete=\"on\" type=\"text\" id=\"repopick_topics_text_field"+t+"\" name=\"repopick_topics[]\" class=\"form-control\" /></div></div><button type=\"button\" name=\"remove\" id=\"repopick_topics"+t+"\" class=\"btn btn-danger btn_remove\" style=\"margin-top: 5px;\">X</button></div></li>"),$("#repopick_topics_text_field"+t+"").focus()}),$("body").on("click","#add4",function(){u++,$("#dynamic_field-4-").append("<li class=\"list-group-item\" style=\"border:none\" id=\"dynamic_field-repopick_changes"+u+"\"><div class=\"row\"><div class=\"col-md-11 col-xs-11\" style=\"padding-left:0px\"><div class=\"form-group\" id=\"repopick_changes_group"+u+"\"><input autocomplete=\"on\" type=\"text\" id=\"repopick_changes_text_field"+u+"\" name=\"repopick_changes[]\" class=\"form-control\" /></div></div><button type=\"button\" name=\"remove\" id=\"repopick_changes"+u+"\" class=\"btn btn-danger btn_remove\" style=\"margin-top: 5px;\">X</button></div></li>"),$("#repopick_changes_text_field"+u+"").focus()}),$("#global_override").bootstrapToggle({on:"Yes",off:"No",onstyle:"success",offstyle:"danger"}),$("body").on("change","#global_override",function(){$(this).prop("checked")?($("#default_buildtype_state").trigger("change"),$("#hidden_global_override").val("yes"),$("#switch-block").show()):($("#default_buildtype_state").trigger("change"),$("#hidden_global_override").val("no"),$("#switch-block").hide())}),$("#is_official").bootstrapToggle({on:"Yes",off:"No",onstyle:"success",offstyle:"danger"}),$("body").on("change","#is_official",function(){$(this).prop("checked")?$("#hidden_is_official").val("yes"):$("#hidden_is_official").val("no")}),$("#test_build").bootstrapToggle({on:"Yes",off:"No",onstyle:"success",offstyle:"danger"}),$("body").on("change","#test_build",function(){$(this).prop("checked")?$("#hidden_test_build").val("yes"):$("#hidden_test_build").val("no")}),$("#force_clean").bootstrapToggle({on:"Yes",off:"No",onstyle:"success",offstyle:"danger"}),$("body").on("change","#force_clean",function(){$(this).prop("checked")?$("#hidden_force_clean").val("yes"):$("#hidden_force_clean").val("no")}),$("#default_buildtype_state").bootstrapToggle({on:"Yes",off:"No",onstyle:"success",offstyle:"danger"}),$("body").on("change","#default_buildtype_state",function(){$(this).prop("checked")?($("#hidden_default_buildtype_state").val("yes"),$("#buildtype_div").hide()):($("#hidden_default_buildtype_state").val("no"),$("#buildtype_div").show())}),$("body").on("click","#PipelineBuildTrigger",function(){$("#notifyDialog").modal({backdrop:"static",keyboard:!1,show:!0}),$("#notifyDialogData").text("Please wait...!"),$.ajax({url:"jenkinsBlueFunc.php",method:"POST",data:{PipelineBuildTrigger:"yes"},success:function(a){a=a.trim(),$("#notifyDialogData").text(a),setTimeout(function(){$("#notifyDialog").modal("hide")},2e3)}})}),$("#bootimage").bootstrapToggle({on:"Yes",off:"No",onstyle:"success",offstyle:"danger"}),$("body").on("change","#bootimage",function(){$(this).prop("checked")?$("#hidden_bootimage").val("yes"):$("#hidden_bootimage").val("no")}),$("#weeklies_opt").bootstrapToggle({on:"Opt In",off:"Opt Out",onstyle:"success",offstyle:"danger"}),$("body").on("change","#weeklies_opt",function(){$(this).prop("checked")?$("#hidden_weeklies_opt").val("yes"):$("#hidden_weeklies_opt").val("no")}),$(document).on("click",".btn_remove",function(){var a=$(this).attr("id");$("#dynamic_field-"+a+"").remove()}),$("body").on("click","#submit",function(){return $("#notifyDialog").modal({backdrop:"static",keyboard:!1,show:!0}),e()?void($("#notifyDialogData").text("Please wait...!"),$.ajax({url:"send_data.php",method:"POST",data:$("#device_changes").serialize(),success:function(a){a=a.trim(),$("#notifyDialogData").text(a),setTimeout(function(){$("#notifyDialog").modal("hide")},2e3)}})):($("#notifyDialogData").text("Invalid data...!!"),void setTimeout(function(){$("#notifyDialog").modal("hide")},800))}),$("body").on("click","#buildTrigger",function(){$("#submit").trigger("click"),$("#notifyDialog").modal({backdrop:"static",keyboard:!1,show:!0}),$("#notifyDialogData").text("Please wait...!"),$.ajax({async:!1,url:"jenkinsBlueFunc.php",method:"POST",data:{buildTrigger:"yes"},success:function(a){$("#buildOutput").empty(),a=a.trim(),$("#notifyDialogData").text(a),setTimeout(function(){$("#notifyDialog").modal("hide")},2e3)}})}),$("body").on("click","#buildRemoveQueue",function(){$("#notifyDialog").modal({backdrop:"static",keyboard:!1,show:!0}),$("#notifyDialogData").text("Please wait...!"),$.ajax({url:"jenkinsBlueFunc.php",method:"POST",data:{buildRemoveQueue:"yes"},success:function(a){a=a.trim(),$("#notifyDialogData").text(a),setTimeout(function(){$("#notifyDialog").modal("hide")},2e3)}})}),$("body").on("click","#buildStop",function(){$("#notifyDialog").modal({backdrop:"static",keyboard:!1,show:!0}),$("#notifyDialogData").text("Please wait...!"),$.ajax({url:"jenkinsBlueFunc.php",method:"POST",data:{buildStop:"yes"},success:function(a){a=a.trim(),$("#notifyDialogData").text(a),setTimeout(function(){$("#notifyDialog").modal("hide")},2e3)}})}),$("#build-progress-bar").hide(),function(){$.ajax({method:"POST",url:"jenkinsBlueFunc.php",data:{getHeaderTextSize:"yes"},success:function(a){if(null!=a){var b=JSON.parse(a);window.curTextSize=+b["x-text-size"]}}})}();var j=$("#config_dev_name").text().trim();"Common_config config:"!=j&&h(),$("body").on("click","#fullLog",function(){$.ajax({url:"jenkinsBlueFunc.php",method:"POST",data:{getBodyOutput:"yes",headerTextSize:0},success:function(a){if(null!=a){clearTimeout(window.jenkinsLooper);var b=JSON.parse(a),c=JSON.parse(b.headers),d=b.body;window.curTextSize=+c["x-text-size"],$("#buildOutput").empty(),$("#buildOutput").append("<p id=\"logs\">"+d+"</p>"),h()}}})}),$("body").on("click","#reset-hard",function(){$("#is_official").bootstrapToggle("on"),$("#test_build").bootstrapToggle("off"),$("#force_clean").bootstrapToggle("off"),$("#buildtype").val("userdebug"),$("#bootimage").bootstrapToggle("off"),$("#weeklies_opt").bootstrapToggle("on"),$("default_buildtype_state").bootstrapToggle("on")})});